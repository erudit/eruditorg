{% load i18n %}
{% load rules %}

{% has_perm 'authorization.manage_authorizations' request.user scope_current_organisation as can_manage_authorizations %}
{% has_perm 'subscription.manage_organisation_subscription_ips' request.user scope_current_organisation as can_manage_organisation_subscription_ips %}
{% has_perm 'subscription.manage_organisation_subscription_information' request.user scope_current_organisation as can_manage_organisation_subscription_information %}

{% has_perm 'library.has_access_to_dashboard' request.user scope_current_organisation as can_access_library_dashboard %}
{% has_perm 'has_staff_access' request.user as has_staff_access %}


<ul>
  <li class="sidenav-item">
    <a href="{% url 'userspace:library:home' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-home-outline sidenav-icon"></span>
      <h2 class="sidenav-label">{{ scope_current_organisation.name }}</h2>
    </a>
  </li>

  {% if can_access_library_dashboard %}
  <li class="sidenav-item{% if menu_library == 'stats' %} active{% endif %}">
    <a href="{% url 'userspace:library:stats:landing' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-analytics-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Consultations" %}</span>
    </a>
  </li>
  {% endif %}

  {% if can_access_library_dashboard %}
  <li class="sidenav-item{% if menu_library == 'subscription_ips' %} active{% endif %}">
    <a href="{% url 'userspace:library:subscription_ips:list' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-location-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Adresses IP" %}</span>
    </a>
  </li>
  {% endif %}

  <li class="sidenav-item{% if menu_library == 'collections' %} active{% endif %}">
    <a href="{% url 'userspace:library:collection:landing' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-box-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Collections" %}</span>
    </a>
  </li>

  {% if can_access_library_dashboard %}
  <li class="sidenav-item{% if menu_library == 'subscription_information' %} active{% endif %}">
    <a href="{% url 'userspace:library:subscription_information:update' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-cloud-upload-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Logo institutionnel" %}</span>
    </a>
  </li>
  {% endif %}

  {% if can_access_library_dashboard and has_legacy_profile %}
  <li class="sidenav-item{% if menu_library == 'connection' %} active{% endif %}">
    <a href="{% url 'userspace:library:connection:landing' %}">
      <span class="ion-ios-cog-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Param√®tres de connexion" %}</span>
    </a>
  </li>
  {% endif %}

  {% if has_staff_access %}
  <li class="sidenav-item{% if menu_library == 'authorization' %} active{% endif %}">
    <a href="{% url 'userspace:library:authorization:list' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-locked-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Autorisations" %}</span>
    </a>
  </li>
  {% endif %}

  {% if has_staff_access %}
  <li class="sidenav-item{% if menu_library == 'members' %} active{% endif %}">
    <a href="{% url 'userspace:library:members:list' organisation_pk=scope_current_organisation.pk %}">
      <span class="ion-ios-people-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Membres" %}</span>
    </a>
  </li>
  {% endif %}

  {% if can_access_library_dashboard and has_legacy_profile %}
  <li class="sidenav-item{% if menu_library == 'diagnosis' %} active{% endif %}">
    <a href="{% url 'userspace:library:diagnosis:landing' %}">
      <span class="ion-ios-medkit-outline sidenav-icon"></span>
      <span class="sidenav-label">{% trans "Diagnostic" %}</span>
    </a>
  </li>
  {% endif %}

</ul>
