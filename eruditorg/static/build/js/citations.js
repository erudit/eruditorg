!function(e){var t={};function n(c){if(t[c])return t[c].exports;var o=t[c]={i:c,l:!1,exports:{}};return e[c].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(c,o,function(t){return e[t]}.bind(null,o));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=85)}({0:function(e,t,n){"use strict";function c(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllers=void 0===t?{}:t}var t,n,o;return t=e,(n=[{key:"execAction",value:function(e,t){""!==e&&this.controllers[e]&&"function"==typeof this.controllers[e][t]&&this.controllers[e][t]()}},{key:"init",value:function(){if(document.body){var e=document.body,t=e.getAttribute("data-controller"),n=e.getAttribute("data-action");t&&(this.execAction(t,"init"),this.execAction(t,n))}}}])&&c(t.prototype,n),o&&c(t,o),e}();t.a=o},102:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),i={init:function(){function e(){var e=$(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]:checked").length,t={count:e},n=ngettext("%(count)s document sélectionné","%(count)s documents sélectionnés",t.count),c=interpolate(n,t,!0);$(".saved-citations strong").text(c),e?$("#id_selection_tools").show():($("#id_selection_tools").hide(),$("#select-all-on-current-page").prop("checked",!1),$("#select-all-across-all-pages").hide())}function t(e){var t=e.data("document-type"),n=$("[data-"+t+"-count]"),c=parseInt(n.data(t+"-count"));if(c-=1){var o={count:c},i=void 0;"scientific-article"===t?i=ngettext("%(count)s article savant","%(count)s articles savants",o.count):"cultural-article"===t?i=ngettext("%(count)s article culturel","%(count)s articles culturels",o.count):"thesis"===t&&(i=ngettext("%(count)s thèse","%(count)s thèses",o.count));var r=interpolate(i,o,!0);n.text(r),n.data(t+"-count",c)}else n.remove()}function n(){var e=parseInt($(".total-documents").text())-1;$(".total-documents").text(e)}function c(){0===$(".bib-records .bib-record").length&&location.reload()}function i(){var e=new Array;return $(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]:checked").each((function(){var t=$(this).parents("li.bib-record");e.push(t.data("document-id"))})),e}$("#select-all-across-all-pages").on("click",(function(t){$(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]").prop("checked",!0),$(this).hide(),$("#unselect-all").show(),e(),t.preventDefault()})),$("#unselect-all").on("click",(function(t){$(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]").prop("checked",!1),$("#select-all-on-current-page").prop("checked",!1),$(this).hide(),e(),t.preventDefault()})),$("#select-all-on-current-page").on("change",(function(t){$(this).is(":checked")?($(".hidden-bib-records .checkbox").length&&$("#select-all-across-all-pages").show(),$(".bib-records .checkbox input[type=checkbox]").prop("checked",!0),$(".hidden-bib-records .checkbox input[type=checkbox]").prop("checked",!1)):($("#select-all-across-all-pages, #unselect-all").hide(),$(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]").prop("checked",!1)),e()})),$("#citations_list .bib-records .checkbox input[type=checkbox]").on("change",(function(t){$(this).not(":checked")&&($(".hidden-bib-records").find(".checkbox input[type=checkbox]").prop("checked",!1),$(".hidden-bib-records .checkbox").length&&$("#select-all-across-all-pages").show(),$("#unselect-all").hide()),e()})),$("a[data-remove]").click((function(o){o.preventDefault();var i=$(this).parents("li.bib-record");i.find(".checkbox input[type=checkbox]").prop("checked",!1),function(o){var i=o.data("document-id");$.ajax({type:"POST",url:Urls["public:citations:remove_citation"](),data:{document_id:i}}).done((function(){o.remove(),e(),t(o),c(),n()}))}(i)})),$("#id_selection_tools a.remove-selection").click((function(o){if(o.preventDefault(),0!=confirm(gettext("Voulez-vous vraiment supprimer votre sélection ?"))){var r=i();$.ajax({type:"POST",url:Urls["public:citations:remove_citation_batch"](),data:{document_ids:r},traditional:!0}).done((function(){$("#select-all-on-current-page").prop("checked",!1),$("#select-all-across-all-pages, #unselect-all").hide(),$(".bib-records, .hidden-bib-records").find(".checkbox input[type=checkbox]:checked").each((function(){$(this).prop("checked",!1);var o=$(this).parents("li.bib-record");t(o),o.remove(),e(),c(),n()}))}))}})),$("#export_citation_enw").click((function(e){e.preventDefault();var t=i(),n=Urls["public:citations:citation_enw"]()+"?"+$.param({document_ids:t},!0);window.location.href=n})),$("#export_citation_ris").click((function(e){e.preventDefault();var t=i(),n=Urls["public:citations:citation_ris"]()+"?"+$.param({document_ids:t},!0);window.location.href=n})),$("#export_citation_bib").click((function(e){e.preventDefault();var t=i(),n=Urls["public:citations:citation_bib"]()+"?"+$.param({document_ids:t},!0);window.location.href=n})),$("a[data-cite-inline]").each((function(){new o.b($(this))})),$("a[data-cite-ajax]").each((function(){new o.a($(this))}))}};$(document).ready((function(){new c.a({"public:citations:list":i}).init()}))},2:function(e,t,n){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var o=function e(t){c(this,e),t.magnificPopup({mainClass:"mfp-fade",removalDelay:750,type:"inline",closeOnBgClick:!0,closeBtnInside:!0,items:{src:t.data("modal-id"),type:"inline"},tLoading:gettext("Chargement en cours"),tClose:gettext("Fermer (Esc)")})},i=function e(t){c(this,e),t.magnificPopup({mainClass:"mfp-fade",removalDelay:750,type:"ajax",closeOnBgClick:!0,closeBtnInside:!0,ajax:{tError:gettext("Outils de citation non disponibles pour cet article.")},tLoading:gettext("Chargement en cours"),tClose:gettext("Fermer (Esc)")})}},85:function(e,t,n){n(102),e.exports=n(86)},86:function(e,t,n){}});