!function(t){var e={};function n(c){if(e[c])return e[c].exports;var o=e[c]={i:c,l:!1,exports:{}};return t[c].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,c){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(c,o,function(e){return t[e]}.bind(null,o));return c},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=85)}({0:function(t,e,n){"use strict";function c(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controllers=void 0===e?{}:e}var e,n,o;return e=t,(n=[{key:"execAction",value:function(t,e){""!==t&&this.controllers[t]&&"function"==typeof this.controllers[t][e]&&this.controllers[t][e]()}},{key:"init",value:function(){if(document.body){var t=document.body,e=t.getAttribute("data-controller"),n=t.getAttribute("data-action");e&&(this.execAction(e,"init"),this.execAction(e,n))}}}])&&c(e.prototype,n),o&&c(e,o),t}();e.a=o},100:function(t,e,n){"use strict";n.r(e);var c=n(0),o=n(4),i={init:function(){function t(){var t=$("#citations_list .bib-records .checkbox input[type=checkbox]:checked").length,e={count:t},n=ngettext("%(count)s document sélectionné","%(count)s documents sélectionnés",e.count),c=interpolate(n,e,!0);$(".saved-citations strong").text(c),t?$("#id_selection_tools").show():$("#id_selection_tools").hide()}function e(t){var e=t.data("document-type"),n=$("[data-"+e+"-count]"),c=parseInt(n.data(e+"-count"));if(c-=1){var o={count:c},i=void 0;"scientific-article"===e?i=ngettext("%(count)s article savant","%(count)s articles savants",o.count):"cultural-article"===e?i=ngettext("%(count)s article culturel","%(count)s articles culturels",o.count):"thesis"===e&&(i=ngettext("%(count)s thèse","%(count)s thèses",o.count));var r=interpolate(i,o,!0);n.text(r),n.data(e+"-count",c)}else n.remove()}function n(){var t=parseInt($(".total-documents").text())-1;$(".total-documents").text(t)}function c(){0===$(".bib-record").length&&location.reload()}function i(){var t=new Array;return $("#citations_list .bib-records .checkbox input[type=checkbox]:checked").each((function(){var e=$(this).parents("li.bib-record");t.push(e.data("document-id"))})),t}$(".documents-head input[type=checkbox]").on("change",(function(t){$(this).is(":checked")?$("#citations_list .bib-records .checkbox input[type=checkbox]").each((function(){$(this).prop("checked",!0)})):$("#citations_list .bib-records .checkbox input[type=checkbox]").each((function(){$(this).prop("checked",!1)})),$("#citations_list .bib-records .checkbox input[type=checkbox]").change()})),$("#citations_list .bib-records .checkbox input[type=checkbox]").on("change",t),$("a[data-remove]").click((function(o){o.preventDefault();var i=$(this).parents("li.bib-record");i.find(".checkbox input[type=checkbox]").prop("checked",!1),function(o){var i=o.data("document-id");$.ajax({type:"POST",url:Urls["public:citations:remove_citation"](),data:{document_id:i}}).done((function(){o.remove(),t(),e(o),c(),n()}))}(i)})),$("#id_selection_tools a.remove-selection").click((function(o){if(o.preventDefault(),0!=confirm(gettext("Voulez-vous vraiment supprimer votre sélection ?"))){var r=i();$.ajax({type:"POST",url:Urls["public:citations:remove_citation_batch"](),data:{document_ids:r},traditional:!0}).done((function(){$(".documents-head input[type=checkbox]").prop("checked",!1),$("#citations_list .bib-records .checkbox input[type=checkbox]:checked").each((function(){var o=$(this).parents("li.bib-record");o.find(".checkbox input[type=checkbox]").prop("checked",!1),e(o),o.remove(),t(),c(),n()}))}))}})),$("#export_citation_enw").click((function(t){t.preventDefault();var e=i(),n=Urls["public:citations:citation_enw"]()+"?"+$.param({document_ids:e},!0);window.location.href=n})),$("#export_citation_ris").click((function(t){t.preventDefault();var e=i(),n=Urls["public:citations:citation_ris"]()+"?"+$.param({document_ids:e},!0);window.location.href=n})),$("#export_citation_bib").click((function(t){t.preventDefault();var e=i(),n=Urls["public:citations:citation_bib"]()+"?"+$.param({document_ids:e},!0);window.location.href=n})),$("a[data-cite]").each((function(){new o.a($(this))}))}};$(document).ready((function(){new c.a({"public:citations:list":i}).init()}))},4:function(t,e,n){"use strict";e.a=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.magnificPopup({mainClass:"mfp-fade",removalDelay:750,type:"ajax",closeOnBgClick:!0,closeBtnInside:!0,items:{src:e.data("modal-id"),type:"inline"}})}},85:function(t,e,n){n(100),t.exports=n(86)},86:function(t,e,n){}});