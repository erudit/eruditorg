{% load i18n %}

<div id="div_id_{{ field.html_name }}" class="form-group akkordion" data-akkordion-single="true">
  <label for="id_{{ field.auto_id }}_0" class="control-label akkordion-title">{{ field.label }} {% if field.help_text %}<span class="hint--top hint--no-animate" data-hint="{{ field.help_text }}"><i class="ion-help-circled"></i></span>{% endif %} <i class="icon ion-ios-arrow-down caret"></i></label>
  <div class="controls akkordion-content {% if field.value %}akkordion-active{% endif %}">
  {% for choice in field.field.choices %}
    {# wrap in accordion after 10th #}
    {% if forloop.counter == 11 %}
    {# open div #}
    <div class="akkordion" data-akkordion-single="true">
      <h5 class="akkordion-title color-red pull-right">{% trans "+ Autres..." %}</h5>
      <div class="akkordion-content">
    {% endif %}
    <div class="checkbox">
      <input type="checkbox" name="{{ field.html_name }}" class="styled" id="{{ field.auto_id }}_{{ forloop.counter }}" value="{{ choice.0 }}"{% if choice.0 in field.value or choice.0|stringformat:"s" in field.value or choice.0|stringformat:"s" == field.value|stringformat:"s" %} checked="checked"{% endif %}>
      <label for="{{ field.auto_id }}_{{ forloop.counter }}" class="">{{ choice.1 }}</label>
    </div>
    {# close accordion when last with at least 11 items #}
    {% if forloop.counter >= 11 and forloop.last %}
      {# close accordion content #}
      </div>
      {# close accordion main #}
    </div>
    {% endif %}
    {# end accordion wrapper #}
  {% endfor %}
</div>
